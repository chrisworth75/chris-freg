<div class="container mt-4">
  <!-- Success Alert -->
  <div
    *ngIf="showSuccess"
    class="alert alert-success alert-dismissible fade show"
    role="alert"
  >
    {{ successMessage }}
    <button
      type="button"
      class="btn-close"
      aria-label="Close"
      (click)="showSuccess = false"
    ></button>
  </div>

  <form [formGroup]="feeForm" (ngSubmit)="createFee()" novalidate>
    <!-- Code field -->
    <div class="mb-3">
      <label for="code" class="form-label">Code</label>
      <input
        id="code"
        type="text"
        class="form-control"
        formControlName="code"
        [class.is-invalid]="feeForm.controls.code.touched && feeForm.controls.code.invalid"
        required
      />
      <div class="invalid-feedback" *ngIf="feeForm.controls.code.hasError('required')">
        Code is required.
      </div>
      <div class="invalid-feedback" *ngIf="feeForm.controls.code.hasError('duplicate')">
        This fee code already exists. Please choose another.
      </div>
    </div>

    <!-- Value field -->
    <div class="mb-3">
      <label for="value" class="form-label">Amount</label>
      <input
        id="value"
        type="number"
        class="form-control"
        formControlName="value"
        [class.is-invalid]="feeForm.controls.value.touched && feeForm.controls.value.invalid"
        required
      />
      <div class="invalid-feedback" *ngIf="feeForm.controls.value.hasError('required')">
        Amount is required.
      </div>
      <div class="invalid-feedback" *ngIf="feeForm.controls.value.hasError('min')">
        Amount should be greater than 0.
      </div>
      <div class="invalid-feedback" *ngIf="feeForm.controls.value.hasError('valueMaximum')">
        Amount must be smaller or equal to 1000.
      </div>
    </div>

    <!-- Status field -->
    <div class="mb-3">
      <label for="status" class="form-label">Status</label>
      <select
        id="status"
        class="form-select"
        formControlName="status"
        [class.is-invalid]="feeForm.controls.status.touched && feeForm.controls.status.invalid"
        required
      >
        <option value="" disabled>Select a status</option>
        <option value="draft">Draft</option>
        <option value="approved">Approved</option>
        <option value="live">Live</option>
      </select>
      <div class="invalid-feedback" *ngIf="feeForm.controls.status.hasError('required')">
        Status is required.
      </div>
    </div>

    <!-- Submit button -->
    <button
      type="submit"
      class="btn btn-primary"
      [disabled]="feeForm.invalid"
    >
      Create
    </button>
  </form>
</div>
